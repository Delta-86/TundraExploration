@PART[*]:HAS[@PLUME[MerlinPlume]]:AFTER[zRealPlume]:NEEDS[SmokeScreen]
{
    %EFFECTS
    {
        %MerlinPlumeAll
        {
          MODEL_MULTI_SHURIKEN_PERSIST
          {
            //Get the inputs from the other config.
            transformName = #$../../../PLUME[MerlinPlume]/transformName$//thrustTransform
            localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
            localPosition = #$../../../PLUME[MerlinPlume]/plumePosition[0]$,$../../../PLUME[MerlinPlume]/plumePosition[1]$,$../../../PLUME[MerlinPlume]/plumePosition[2]$
            fixedScale    = #$../../../PLUME[MerlinPlume]/plumeScale$
            energy        = #$../../../PLUME[MerlinPlume]/energy$
            speed         = #$../../../PLUME[MerlinPlume]/speed$
            emissionMult  = #$../../../PLUME[MerlinPlume]/emissionMult$

            @fixedScale *= 0.7
            @emissionMult *= 1.5

            //
            name = plume
            modelName = RealPlume/MP_Nazari_FX/KWbooster //TundraExploration/FX/F9shock

            randConeEmit
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 3
              density = 0.00 5
            }
            xyForce
            {
              density = 0.5 1
              density = 0.3 0.85
              density = 0.02 0.9
              density = 0.00 0.96
            }
            zForce = 1.02
            linGrow
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 2
              density = 0.00 6
            }
            size
            {
              density = 0.5 1
              density = 0.3 1.5
            }
            emission
            {
              power = 0 0
              power = 0.4 1
              density = 0.5 1
              density = 0.3 0.8
              density = 0.02 1.5
            }
            energy
            {
              density = 0.5 1.5
              density = 0.3 1.3
              density = 0.02 1.3
              density = 0.00 0.2
            }
            speed
            {
              power = 0 0
              power = 1 2
              density = 0.5 1.2
              density = 0.3 1.8
              density = 0.02 5
              density = 0.00 2
            }
          }
          MODEL_MULTI_SHURIKEN_PERSIST
          {
              //Get the inputs from the other config.
              transformName = #$../../../PLUME[MerlinPlume]/transformNameOne$//centerTransform
              localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
              localPosition = #$../../../PLUME[MerlinPlume]/flarePosition[0]$,$../../../PLUME[MerlinPlume]/flarePosition[1]$,$../../../PLUME[MerlinPlume]/flarePosition[2]$
              fixedScale    = #$../../../PLUME[MerlinPlume]/flareScale$

              @fixedScale *= 1.6
              %energy = 1.2
              %emissionMult = 3

              //
              name = flare
              modelName = TundraExploration/FX/F9blazesuperthicc

              offset
              {
                density = 0.5 0
                density = 0.3 2
                density = 0.02 4
                density = 0.00 0
              }
              size
              {
                density = 0.5 0.7
                density = 0.3 1.2
                density = 0.02 5
                density = 0.002 4
                density = 0.00 1
              }
              linGrow
              {
                density = 0.5 0
                density = 0.3 -0.2
                density = 0.02 -0.5
              }
              speed
              {
                power = 0.0 0.4
                power = 1.0 2.0
                density = 0.5 1
                density = 0.3 1.2
                density = 0.02 4
                density = 0.002 3
                density = 0.00 1
              }
              emission
              {
                power = 0 0.0
        				power = 1 2.0
                density = 0.5 1
                density = 0.3 1
                density = 0.02 1.5
                density = 0.002 1
                density = 0.00 0
              }
              energy
              {
                density = 0.02 1
                density = 0.002 0.2
                density = 0.00 0
              }
          }
          MODEL_MULTI_SHURIKEN_PERSIST
          {
              //Get the inputs from the other config.
              transformName = #$../../../PLUME[MerlinPlume]/transformName$//thrustTransform
              localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
              localPosition = #$../../../PLUME[MerlinPlume]/plumePosition[0]$,$../../../PLUME[MerlinPlume]/plumePosition[1]$,$../../../PLUME[MerlinPlume]/plumePosition[2]$
              fixedScale    = #$../../../PLUME[MerlinPlume]/plumeScale$
              emissionMult  = #$../../../PLUME[MerlinPlume]/emissionMult$
              //
              name = plumeboundary
              modelName = RealPlume/Hoojiwana_FX/MPspike
              fixedEmissions = false
              sizeClamp = 50

              randConeEmit
              {
                density = 0.02 2
                density = 0.00 4
              }
              xyForce = 0.96
              linGrow = 3
              energy = 1.5
              speed = 2

              energy
              {
                density = 0.02 0
                density = 0.00 1
              }
              emission
              {
                power = 0 0
                power = 0.4 1
                density = 0.02 0
                density = 0.00 1
              }
          }

          AUDIO
          {
              channel = Ship
              clip = TundraExploration/Soundbank/Ghidorah_rocket
      				volume = 0.0 0.0
      				volume = 1.0 1.5
      				pitch = 0.0 0.2
      				pitch = 1.0 1.0
      				loop = true
          }
        }
        %MerlinPlumeThree
        {
          MODEL_MULTI_SHURIKEN_PERSIST
          {
            //Get the inputs from the other config.
            transformName = #$../../../PLUME[MerlinPlume]/transformNameThree$//threeTransform
            localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
            localPosition = #$../../../PLUME[MerlinPlume]/plumePosition[0]$,$../../../PLUME[MerlinPlume]/plumePosition[1]$,$../../../PLUME[MerlinPlume]/plumePosition[2]$
            fixedScale    = #$../../../PLUME[MerlinPlume]/plumeScale$
            energy        = #$../../../PLUME[MerlinPlume]/energy$
            speed         = #$../../../PLUME[MerlinPlume]/speed$
            emissionMult  = #$../../../PLUME[MerlinPlume]/emissionMult$

            @fixedScale *= 0.7
            @emissionMult *= 1.5
            offset = 0.3

            //
            name = plume
            modelName = RealPlume/MP_Nazari_FX/KWbooster //TundraExploration/FX/F9shock

            randConeEmit
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 3
              density = 0.00 5
            }
            xyForce
            {
              density = 0.5 1
              density = 0.3 0.85
              density = 0.02 0.9
              density = 0.00 0.96
            }
            linGrow
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 2
              density = 0.00 6
            }
            size
            {
              density = 0.5 1
              density = 0.3 1.5
            }
            emission
            {
              power = 0 0
              power = 0.4 1
              density = 0.5 1
              density = 0.3 0.8
              density = 0.02 1.5
            }
            energy
            {
              density = 0.5 1.5
              density = 0.3 1.3
              density = 0.02 1.3
              density = 0.00 0.2
            }
            speed
            {
              power = 0 0
              power = 1 2
              density = 0.5 1
              density = 0.3 1.5
              density = 0.02 3
              density = 0.00 2
            }
          }
          MODEL_MULTI_SHURIKEN_PERSIST
          {
              //Get the inputs from the other config.
              transformName = #$../../../PLUME[MerlinPlume]/transformNameOne$//centerTransform
              localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
              localPosition = #$../../../PLUME[MerlinPlume]/flarePosition[0]$,$../../../PLUME[MerlinPlume]/flarePosition[1]$,$../../../PLUME[MerlinPlume]/flarePosition[2]$
              fixedScale    = #$../../../PLUME[MerlinPlume]/flareScale$

              @fixedScale *= 1.6
              %energy = 1.2
              %emissionMult = 3

              //
              name = flare
              modelName = TundraExploration/FX/F9blazesuperthicc

              offset
              {
                density = 0.5 0
                density = 0.3 2
                density = 0.02 2
                density = 0.00 0
              }
              size
              {
                density = 0.5 0.7
                density = 0.3 1.2
                density = 0.02 5
                density = 0.002 4
                density = 0.00 1
              }
              linGrow
              {
                density = 0.5 0
                density = 0.3 -0.2
                density = 0.02 -0.5
              }
              speed
              {
                power = 0.0 0.4
                power = 1.0 2.0
                density = 0.5 1
                density = 0.3 1.2
                density = 0.02 4
                density = 0.002 3
                density = 0.00 1
              }
              emission
              {
                power = 0 0.0
        				power = 1 2.0
                density = 0.5 1
                density = 0.3 1
                density = 0.02 1.5
                density = 0.002 1
                density = 0.00 0
              }
              energy
              {
                density = 0.02 1
                density = 0.002 0.2
                density = 0.00 0
              }
          }
          MODEL_MULTI_SHURIKEN_PERSIST
          {
              //Get the inputs from the other config.
              transformName = #$../../../PLUME[MerlinPlume]/transformNameThree$//threeTransform
              localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
              localPosition = #$../../../PLUME[MerlinPlume]/plumePosition[0]$,$../../../PLUME[MerlinPlume]/plumePosition[1]$,$../../../PLUME[MerlinPlume]/plumePosition[2]$
              fixedScale    = #$../../../PLUME[MerlinPlume]/plumeScale$
              emissionMult  = #$../../../PLUME[MerlinPlume]/emissionMult$
              //
              name = plumeboundary
              modelName = RealPlume/Hoojiwana_FX/MPspike
              fixedEmissions = false
              sizeClamp = 50

              randConeEmit
              {
                density = 0.02 2
                density = 0.00 4
              }
              xyForce = 0.96
              linGrow = 3
              energy = 1.5
              speed = 2

              energy
              {
                density = 0.02 0
                density = 0.00 1
              }
              emission
              {
                power = 0 0
                power = 0.4 1
                density = 0.02 0
                density = 0.00 1
              }
          }

          AUDIO
          {
              channel = Ship
              clip = TundraExploration/Soundbank/Ghidorah_rocket
              volume = 0.0 0.0
              volume = 1.0 1.5
              pitch = 0.0 0.2
              pitch = 1.0 1.0
              loop = true
          }
        }
        %MerlinPlumeOne
        {
          MODEL_MULTI_SHURIKEN_PERSIST
          {
            //Get the inputs from the other config.
            transformName = #$../../../PLUME[MerlinPlume]/transformNameOne$//centerTransform
            localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
            localPosition = #$../../../PLUME[MerlinPlume]/plumePosition[0]$,$../../../PLUME[MerlinPlume]/plumePosition[1]$,$../../../PLUME[MerlinPlume]/plumePosition[2]$
            fixedScale    = #$../../../PLUME[MerlinPlume]/plumeScale$
            energy        = #$../../../PLUME[MerlinPlume]/energy$
            speed         = #$../../../PLUME[MerlinPlume]/speed$
            emissionMult  = #$../../../PLUME[MerlinPlume]/emissionMult$

            @fixedScale *= 0.7
            @emissionMult *= 1.5

            name = plume
            modelName = RealPlume/MP_Nazari_FX/KWbooster //TundraExploration/FX/F9shock

            randConeEmit
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 3
              density = 0.00 5
            }
            xyForce
            {
              density = 0.5 1
              density = 0.3 0.85
              density = 0.02 0.9
              density = 0.00 0.96
            }
            linGrow
            {
              density = 0.5 0
              density = 0.3 1
              density = 0.02 2
              density = 0.00 6
            }
            size
            {
              density = 0.5 1
              density = 0.3 1.5
            }
            emission
            {
              power = 0 0
              power = 0.4 1
              density = 0.5 1
              density = 0.3 0.8
              density = 0.02 1.5
            }
            energy
            {
              density = 0.5 1.5
              density = 0.3 1.3
              density = 0.02 1.3
              density = 0.00 0.2
            }
            speed
            {
              power = 0 0
              power = 1 2
              density = 0.5 1
              density = 0.3 1.5
              density = 0.02 3
              density = 0.00 2
            }
          }
          MODEL_MULTI_SHURIKEN_PERSIST
          {
              //Get the inputs from the other config.
              transformName = #$../../../PLUME[MerlinPlume]/transformNameOne$//centerTransform
              localRotation = #$../../../PLUME[MerlinPlume]/localRotation[0]$,$../../../PLUME[MerlinPlume]/localRotation[1]$,$../../../PLUME[MerlinPlume]/localRotation[2]$
              localPosition = #$../../../PLUME[MerlinPlume]/flarePosition[0]$,$../../../PLUME[MerlinPlume]/flarePosition[1]$,$../../../PLUME[MerlinPlume]/flarePosition[2]$
              fixedScale    = #$../../../PLUME[MerlinPlume]/flareScale$

              @fixedScale *= 1.3
              %emissionMult = 2

              //
              name = flare
              modelName = TundraExploration/FX/F9blazetang
      				emission = 0.0 0.0
      				emission = 1.0 2.0
      				speed = 0.0 0.3
      				speed = 1.0 0.8

              randomInitalVelocityOffsetMaxRadius = 0
          }
          AUDIO
          {
              channel = Ship
              clip = TundraExploration/Soundbank/Ghidorah_rocket
      				volume = 0.0 0.0
      				volume = 1.0 1.5
      				pitch = 0.0 0.2
      				pitch = 1.0 1.0
      				loop = true
          }
        }
    }
}
@PART[*]:HAS[@PLUME[MerlinPlume],@EFFECTS:HAS[!engage]]:AFTER[zRealPlume]:NEEDS[SmokeScreen]
{
    @EFFECTS
    {
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = RealPlume/KW_Sounds/sound_liq10
                volume = #$../../../PLUME[MerlinPlume]/plumeScale$
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
}
