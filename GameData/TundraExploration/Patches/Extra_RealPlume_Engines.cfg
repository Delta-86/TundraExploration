// ~~~~~~~~~~~~~~ FALCON 9 ~~~~~~~~~~~~~~~~
@PART[TE_19_F9_S1_Engine]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlume
    cluster = True
    shortIgnition = True
    oneTransformName = centerTransform
    threeTransformName = threeTransform
    allTransformName = thrustTransform
    localRotation = 0,0,0
    flarePosition = 0,0,-0.1
    plumePosition = 0,0,0.1
    flareScale = 1
    plumeScale = 1
    energy = 1
    speed = 1
    emissionMult = 1
  }
  @MODULE[ModuleEngines*]:HAS[#engineID[AllEngines]] {
    %powerEffectName = MerlinPlumeAll
  }
  @MODULE[ModuleEngines*]:HAS[#engineID[ThreeLanding]] {
    %powerEffectName = MerlinPlumeThree
  }
  @MODULE[ModuleEngines*]:HAS[#engineID[CenterOnly]] {
    %powerEffectName = MerlinPlumeOne
  }
}
@PART[TE_19_F9_S2_Engine]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlumeVac
    transformName = thrustTransform
    localRotation = 0,0,0
    flarePosition = 0,0,0.1
    plumePosition = 0,0,0.6
    flareScale = 1
    plumeScale = 1
    energy = 1
    speed = 1
  }
  @MODULE[ModuleEngines*] {
    %powerEffectName = MerlinPlumeVac
  }
}


// ~~~~~~~~~~~~~~ FALCON 9 v1.0 ~~~~~~~~~~~~~~~~
@PART[TE_19_F910_S1_Engine]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlume
    cluster = True
    small = True
    shortIgnition = True
    oneTransformName = centerTransform
    threeTransformName = thrustTransform // not actually used
    allTransformName = thrustTransform
    localRotation = 0,0,0
    flarePosition = 0,0,0
    plumePosition = 0,0,0.3
    flareScale = 1
    plumeScale = 1
    energy = 1
    speed = 1
    emissionMult = 1
  }
  @MODULE[ModuleEngines*] {
    %powerEffectName = MerlinPlumeAll
  }
}
@PART[TE_19_F910_S2_Engine]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlumeVac
    transformName = thrustTransform
    localRotation = 0,0,0
    flarePosition = 0,0,0.1
    plumePosition = 0,0,0.4
    flareScale = 1
    plumeScale = 1
    energy = 1
    speed = 1
  }
  @MODULE[ModuleEngines*] {
    %powerEffectName = MerlinPlumeVac
  }
}



// ~~~~~~~~~~~~~~ FALCON 1 ~~~~~~~~~~~~~~~~
@PART[TE_F1_S1_Engine]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlume
    oneTransformName = thrustTransform
    shortIgnition = True
    localRotation = 0,0,0
    flarePosition = 0,0,-0.1
    plumePosition = 0,0,0.1
    flareScale = 1
    plumeScale = 1
    energy = 1
    speed = 1
    emissionMult = 1
  }
  @MODULE[ModuleEngines*] {
    %powerEffectName = MerlinPlumeOne
  }
}
@PART[TE_F1_S2_Engine]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
{
  @MODULE[ModuleEnginesFX],* {
    %useEngineResponseTime = True
    %engineAccelerationSpeed = 1.0
    %engineDecelerationSpeed = 100.0
  }
  TUNDRAPLUME
  {
    name = MerlinPlumeVac
    transformName = thrustTransform
    localRotation = 0,0,0
    flarePosition = 0,0,-0.1
    plumePosition = 0,0,0.2
    flareScale = 0.46
    plumeScale = 0.46
    energy = 1
    speed = 1
  }
  @MODULE[ModuleEngines*] {
    %powerEffectName = MerlinPlumeVac
  }
}

// TODO: these patches are pretty messy, they will be cleaned up with the next raptor plume update
// RPTR-21 "Raptor" Engine
@PART[TE_18_BFS_SL_RAPTOR]:NEEDS[SmokeScreen]
{
    TUNDRAPLUME
    {
        name = RaptorPlume
        transformName = thrustTransform
        transformNameCenter = thrustTransform
        transformNameOne = thrustTransform
        localRotation = 0, 0, 0
        flarePosition = 0, 0, 0
        flamePosition = 0, 0, 0
        plumePosition:NEEDS[RealismOverhaul] = 0, 0, 0
        plumePosition:NEEDS[!RealismOverhaul] = 0, 0, 0.4
        plumeScale = 0.7
        flareScale = 0.7
        // ~~~ dummy values, not used but there to prevent parsing error
        flameScale = 42
        flameEmission = 42
        // ~~~
        singleFlameScale = 1.2
        singleFlameEmission = 0.7
        energy = 1
        speed = 0.5
        emissionMult = 1
    }
    @TUNDRAPLUME[RaptorPlume]:NEEDS[RealismOverhaul]
    {
      @plumeScale = 1
      @flareScale = 2
      @flameScale = 2
      @singleFlameScale = 2
    }
    @MODULE[ModuleEngines*]
    {
        %powerEffectName = RaptorPlume
        !runningEffectName = DELETE
    }
}

// RAP-37000B "Kingfisher" Booster Engine Cluster
@PART[TE_18_BFB_ENGINE_CLUSTER]:NEEDS[SmokeScreen]
{
  TUNDRAPLUME
  {
    name = RaptorPlume
    transformName = allTransformPlume
    transformNameCenter = centerTransformPlume
    transformNameOne = centerTransform
    localRotation = 0.0, 0.0, 0.0
    plumePosition = 0, 0, 0
    flarePosition:NEEDS[RealismOverhaul] = 0.0, 0.0, 0.0
    flarePosition:NEEDS[!RealismOverhaul] = 0.0, 0.0, -0.3
    flamePosition:NEEDS[RealismOverhaul] = 0, 0, 0
    flamePosition:NEEDS[!RealismOverhaul] = 0, 0, -8
    plumeScale = 0.5
    flareScale = 0.7
    flameScale = 2
    flameEmission = 0.3
    singleFlameScale = 2
    singleFlameEmission = 0.3
    energy = 1
    speed = 0.5
    emissionMult = 0.5
  }
  @TUNDRAPLUME[RaptorPlume]:NEEDS[RealismOverhaul]
  {
    @plumeScale = 1
    @flareScale = 3.3
    @flameScale = 4
    @singleFlameScale = 2
    @singleFlameEmission = 0.2
  }
  @MODULE[ModuleEngines*]:HAS[#engineID[AllEngines]]
  {
      %powerEffectName = RaptorPlumeBig
      !runningEffectName = DELETE
  }
  @MODULE[ModuleEngines*]:HAS[#engineID[CenterOnly]]
  {
      %powerEffectName = RaptorPlume
      !runningEffectName = DELETE
  }
}

// // ~~~~~~~~~~~~~~ Starship/SH ~~~~~~~~~~~~~~~~
// @PART[TE_18_BFS_SL_RAPTOR]:BEFORE[TundraPlume]:NEEDS[SmokeScreen] {
//   @MODULE[ModuleEnginesFX],* {
//     %useEngineResponseTime = True
//     %engineAccelerationSpeed = 1.0
//     %engineDecelerationSpeed = 100.0
//   }
//   TUNDRAPLUME {
//     name = RaptorPlume
//     transformName = thrustTransform
//     localRotation = 0,0,0
//     flarePosition = 0,0,-0.1
//     plumePosition = 0,0,0
//     plumeScale = 1
//     flareScale = 1
//     cluster = False
//     // energy = 1
//     // speed = 1
//     // emissionMult = 1
//   }
//   @MODULE[ModuleEngines*] {
//       %powerEffectName = RaptorPlume
//       !runningEffectName = DELETE
//   }
// }
// @PART[TE_18_BFB_ENGINE_CLUSTER]:BEFORE[TundraPlume]:NEEDS[SmokeScreen]
// {
//   @MODULE[ModuleEnginesFX],* {
//     %useEngineResponseTime = True
//     %engineAccelerationSpeed = 1.0
//     %engineDecelerationSpeed = 100.0
//   }
//   TUNDRAPLUME {
//     name = RaptorPlume
//     transformName = placeholder
//     oneTransformName = centerTransform          // single engine effect
//     centerTransformName = centerTransformPlume  // all center engines
//     allTransformName = allTransformPlume        // ALL engines
//     outerTransformName = machTransformPlume     // outer ring of 12 engines
//     cluster = True
//     localRotation = 0,0,0
//     flarePosition = 0,0,-0.1
//     plumePosition = 0,0,0
//     plumeScale = 1.0
//     flareScale = 1.0
//   }
//   @MODULE[ModuleEngines*]:HAS[#engineID[AllEngines]] {
//     %powerEffectName = RaptorClusterPlume
//   }
//   @MODULE[ModuleEngines*]:HAS[#engineID[CenterOnly]] {
//     %powerEffectName = RaptorPlume
//   }
// }
